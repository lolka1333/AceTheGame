# Google Play Billing Library 7+ Compatibility Updates

## –û–±–∑–æ—Ä / Overview

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –±—ã–ª –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤–µ—Ä—Å–∏–π Google Play Billing Library (7 –∏ 8), –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–∞–Ω—É—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ —Å 31 –∞–≤–≥—É—Å—Ç–∞ 2025 –≥–æ–¥–∞.

This project has been updated to support the latest Google Play Billing Library versions (7 and 8), which become mandatory from August 31, 2025.

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è / Key Improvements

### ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ—Ä—Å–∏–π Billing Library
- Google Play Billing Library 7.x (–ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞)
- Google Play Billing Library 8.x (–≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é)
- –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –≤–µ—Ä—Å–∏—è–º–∏ 5.x –∏ 6.x

### ‚úÖ –ù–æ–≤–∞—è –º–æ–¥–µ–ª—å –ø–æ–¥–ø–∏—Å–æ–∫
- **Base Plans**: –ù–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ–ø–ª–∞—Ç—ã –¥–ª—è –æ–¥–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏
- **Offers**: –ì–∏–±–∫–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ü–µ–Ω–∞–º–∏ –∏ —É—Å–ª–æ–≤–∏—è–º–∏
- **Regional Pricing**: –†–∞–∑–Ω—ã–µ —Ü–µ–Ω—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤
- **Installment Subscriptions**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞—Å—Å—Ä–æ—á–∫–∏ (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ —Ä–µ–≥–∏–æ–Ω—ã)

### ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–∞–∫ —Å—Ç–∞—Ä—ã—Ö, —Ç–∞–∫ –∏ –Ω–æ–≤—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ API
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±—Ñ—É—Å—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞
- –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è –ª—É—á—à–µ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

### ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö –ø–æ–∫—É–ø–æ–∫ (Pending Purchases)
- –ù–æ–≤—ã–µ –∫–æ–¥—ã –æ—à–∏–±–æ–∫ (NETWORK_ERROR)
- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã

## üìÅ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã / Updated Files

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏ / Build Configuration
- `billing-hack/build.gradle` - –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤–µ—Ä—Å–∏–∏ SDK –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- `billing-hack/app/build.gradle` - –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Android
- `Modder/modder/build.gradle` - –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –Ω–æ–≤—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏

### AIDL –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å / AIDL Interface
- `billing-hack/app/src/main/aidl/.../IInAppBillingService.aidl` - –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã API

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞ / Service Implementation
- `billing-hack/app/src/main/java/org/billinghack/BillingService.kt` - –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤—ã—Ö API

### –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –ø–∞—Ç—á–∏–Ω–≥–∞ / Patching Utilities
- `Modder/modder/src/main/java/modder/InAppPurchaseUtil.kt` - –£–ª—É—á—à–µ–Ω–Ω–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏ –ø–∞—Ç—á–∏–Ω–≥

## üõ† –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ / Usage

### –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ / Building the Project

```bash
# –°–±–æ—Ä–∫–∞ billing-hack APK
cd billing-hack
./gradlew assembleRelease

# –°–±–æ—Ä–∫–∞ Modder (—Ç—Ä–µ–±—É–µ—Ç Android Studio)
cd Modder
./gradlew build
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ / Testing

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞
./test_billing_patch.sh your_app.apk

# –≠—Ç–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–µ—Ç:
# - –°–±–æ—Ä–∫—É billing-hack APK
# - –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –≤ —Ü–µ–ª–µ–≤–æ–º APK
# - –£—Å—Ç–∞–Ω–æ–≤–∫—É –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ (–µ—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ)
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Modder / Using Modder

```kotlin
// –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –ø–∞—Ç—á–∏–Ω–≥–∞
val apktool = Apktool(apkFile)
val success = InAppPurchaseUtil.patchApk(apktool, redirectToLuckyPatcher = false)

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –ø–∞—Ç—á–∏–Ω–≥–∞
if (success) {
    val verified = InAppPurchaseUtil.verifyPatch(apktool)
    println("Patch verified: $verified")
}
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è / Setup and Requirements

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è / System Requirements
- Android Studio Hedgehog (2023.1.1) –∏–ª–∏ –Ω–æ–≤–µ–µ
- JDK 17 –∏–ª–∏ –Ω–æ–≤–µ–µ
- Android SDK 34
- Kotlin 2.0.21+

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ / Dependencies
–í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –ø—Ä–æ–µ–∫—Ç–∞.

## üìä –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å / Compatibility Matrix

| Billing Library Version | Status | Notes |
|-------------------------|--------|-------|
| 5.x | ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è | –°–æ—Ö—Ä–∞–Ω–µ–Ω—ã —Å—Ç–∞—Ä—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã |
| 6.x | ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è | –£–ª—É—á—à–µ–Ω–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å |
| 7.x | ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ | –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª–µ–≤–∞—è –≤–µ—Ä—Å–∏—è |
| 8.x | ‚úÖ –ì–æ—Ç–æ–≤ | –ë—É–¥—É—â–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å |

## üÜï –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ / New Features

### 1. –£–ª—É—á—à–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –ø–æ–¥–ø–∏—Å–æ–∫ / Enhanced Subscription Model
```json
{
  "subscriptionOfferDetails": [
    {
      "basePlanId": "monthly-base",
      "offerId": null,
      "offerToken": "monthly_offer_token",
      "pricingPhases": [...]
    }
  ]
}
```

### 2. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤—ã—Ö –º–µ—Ç–æ–¥–æ–≤ API / New API Methods Support
- `queryProductDetails()` - –ù–æ–≤–∞—è –º–æ–¥–µ–ª—å –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- `isFeatureSupported()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–π
- `getBillingConfig()` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–∏–ª–ª–∏–Ω–≥–∞

### 3. –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ / Enhanced Detection
```kotlin
// –ù–æ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è
val NEW_BILLING_PATTERNS = listOf(
    "queryProductDetailsAsync",
    "ProductDetails",
    "BillingClient",
    "PurchasesUpdatedListener"
)
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –æ—Ç–ª–∞–¥–∫–∞ / Diagnostics and Debugging

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ / Pattern Detection
```kotlin
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –±–∏–ª–ª–∏–Ω–≥–∞
val hasPatterns = InAppPurchaseUtil.containsBillingPatterns(smaliCode)
val hasNewPatterns = InAppPurchaseUtil.containsNewBillingPatterns(smaliCode)
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ / Logging
```kotlin
// –í–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
Log.d("BillingHack", "Detailed debugging information")
```

### –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è / Verification
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ APK
./test_billing_patch.sh app.apk
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è / Important Notes

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è / Mandatory Changes
–° 31 –∞–≤–≥—É—Å—Ç–∞ 2025 –≥–æ–¥–∞ –≤—Å–µ –Ω–æ–≤—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Billing Library 7+.

### –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è / Regional Limitations
- Installment subscriptions: —Ç–æ–ª—å–∫–æ –ë—Ä–∞–∑–∏–ª–∏—è, –§—Ä–∞–Ω—Ü–∏—è, –ò—Ç–∞–ª–∏—è, –ò—Å–ø–∞–Ω–∏—è
- Alternative billing: —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### –ú–∏–≥—Ä–∞—Ü–∏—è / Migration
–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–æ–¥–æ–ª–∂–∞—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Ç—Ä–µ–±—É—é—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏.

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞ / Support

### –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º / Troubleshooting

1. **–ü–∞—Ç—Ç–µ—Ä–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω / Pattern Not Found**
   ```bash
   # –í–∫–ª—é—á–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
   export DEBUG=1
   ./test_billing_patch.sh app.apk
   ```

2. **–û—à–∏–±–∫–∞ —Å–±–æ—Ä–∫–∏ / Build Error**
   ```bash
   # –û–±–Ω–æ–≤–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Å–±–æ—Ä–∫–∏
   ./gradlew wrapper --gradle-version=8.7
   ```

3. **–ü–∞—Ç—á –Ω–µ –ø—Ä–∏–º–µ–Ω–∏–ª—Å—è / Patch Failed**
   ```kotlin
   // –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±—Ñ—É—Å—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥
   val patterns = InAppPurchaseUtil.NEW_BILLING_PATTERNS
   ```

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã / Useful Commands
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–π
./gradlew --version

# –û—á–∏—Å—Ç–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
./gradlew clean

# –°–±–æ—Ä–∫–∞ —Å –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
./gradlew assembleRelease --info
```

## üîÆ –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è / Future Roadmap

- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Billing Library 9 (–≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å)
- üîÑ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ Google
- üîÑ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- üîÑ –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è / License

–ü—Ä–æ–µ–∫—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é –ª–∏—Ü–µ–Ω–∑–∏—é. –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ–≤–º–µ—Å—Ç–∏–º—ã —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

---

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ / Conclusion

–≠—Ç–æ—Ç –∞–ø–≥—Ä–µ–π–¥ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ—Ä—Å–∏–π Google Play Billing Library, —Å–æ—Ö—Ä–∞–Ω—è—è –ø—Ä–∏ —ç—Ç–æ–º –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å. –£–ª—É—á—à–µ–Ω–Ω–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö API –∏ —É–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –Ω–∞–¥–µ–∂–Ω—É—é —Ä–∞–±–æ—Ç—É —Å —à–∏—Ä–æ–∫–∏–º —Å–ø–µ–∫—Ç—Ä–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

This upgrade provides comprehensive support for modern Google Play Billing Library versions while maintaining backward compatibility. Enhanced pattern detection, modern API support, and improved error handling ensure reliable operation across a wide range of applications.

**–ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å Google Play Billing Library 7+ ‚úÖ**  
**Ready for Google Play Billing Library 7+ ‚úÖ**